# Test and build TriXX

# Run in jRuby environment
image: jruby:9.2.8.0

stages:
  - test
  - build_docker_image

test:
  stage: test
  script:
    - apt-get update -qy
    - apt-get -y upgrade
    - apt-get install -y make
    - apt-get install -y gcc
    - apt-get install -y g++
    - apt-get install -y nodejs
    - gem install bundler
    - bundle install --path /cache
    - bundle exec rake db:create RAILS_ENV=test
    - bundle exec rake test
